(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34763,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));r.displayName="Card";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let o=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>c,"CardDescription",()=>o,"CardHeader",()=>n,"CardTitle",()=>i])},95613,e=>{"use strict";var t=e.i(43476),s=e.i(25913);e.i(87467);var a=e.i(55654);let r=(0,s.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow",success:"border-transparent bg-success text-success-foreground shadow",warning:"border-transparent bg-warning text-warning-foreground shadow",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...n}){return(0,t.jsx)("div",{className:(0,a.cn)(r({variant:s}),e),...n})}e.s(["Badge",()=>n])},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},63876,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,error:s,...r},n)=>(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s&&"border-destructive focus-visible:ring-destructive",e),ref:n,...r}),s&&(0,t.jsx)("p",{className:"mt-1 text-xs text-destructive",children:s})]}));r.displayName="Textarea",e.s(["Textarea",()=>r])},34098,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,type:s,error:r,...n},i)=>(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r&&"border-destructive focus-visible:ring-destructive",e),ref:i,...n}),r&&(0,t.jsx)("p",{className:"mt-1 text-xs text-destructive",children:r})]}));r.displayName="Input",e.s(["Input",()=>r])},40574,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25913);e.i(87467);var r=e.i(55654),n=e.i(31278);let i=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef(({className:e,variant:s,size:a,loading:o,children:c,disabled:l,...d},m)=>(0,t.jsxs)("button",{className:(0,r.cn)(i({variant:s,size:a,className:e})),ref:m,disabled:l||o,...d,children:[o&&(0,t.jsx)(n.Loader2,{className:"animate-spin"}),c]}));o.displayName="Button",e.s(["Button",()=>o])},25913,e=>{"use strict";var t=e.i(7670);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=t.clsx;e.s(["cva",0,(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:o}=t,c=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],a=null==o?void 0:o[e];if(null===t)return null;let n=s(t)||s(a);return i[e][n]}),l=r&&Object.entries(r).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{});return a(e,c,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:s,className:a,...r}=t;return Object.entries(r).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...o,...l}[t]):({...o,...l})[t]===s})?[...e,s,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},80720,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("label",{ref:r,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));r.displayName="Label",e.s(["Label",()=>r])},7003,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654),r=e.i(37727);let n=s.createContext(void 0);function i({children:e,open:a,onOpenChange:r}){let[i,o]=s.useState(!1);return(0,t.jsx)(n.Provider,{value:{open:a??i,setOpen:r??o},children:e})}function o({children:e,className:i}){let{open:o,setOpen:c}=function(){let e=s.useContext(n);if(!e)throw Error("useDialog must be used within a Dialog");return e}();return(s.useEffect(()=>{let e=e=>{"Escape"===e.key&&c(!1)};return o&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[o,c]),o)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 animate-fade-in",onClick:()=>c(!1)}),(0,t.jsxs)("div",{className:(0,a.cn)("relative z-50 w-full max-w-lg max-h-[90vh] overflow-auto rounded-lg bg-card p-4 sm:p-6 shadow-lg animate-slide-up",i),children:[(0,t.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>c(!1),children:[(0,t.jsx)(r.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),e]})]}):null}function c({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s})}function l({className:e,...s}){return(0,t.jsx)("h2",{className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",e),...s})}function d({className:e,...s}){return(0,t.jsx)("p",{className:(0,a.cn)("text-sm text-muted-foreground",e),...s})}function m({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s})}e.s(["Dialog",()=>i,"DialogContent",()=>o,"DialogDescription",()=>d,"DialogFooter",()=>m,"DialogHeader",()=>c,"DialogTitle",()=>l])},25823,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let a=[{name:"Agreeable Gray",hex:"#D1CCC4",accent:"#B8B2A7"},{name:"Repose Gray",hex:"#C8C5BE",accent:"#B0ADA5"},{name:"Worldly Gray",hex:"#D0CCC7",accent:"#B8B3AD"},{name:"Mindful Gray",hex:"#BDB8B0",accent:"#A59F96"},{name:"Sea Salt",hex:"#C5D4C5",accent:"#AEC0AE"},{name:"Alabaster",hex:"#F3EDE5",accent:"#E8DFD3"},{name:"Greek Villa",hex:"#F0EBE0",accent:"#DDD4C5"},{name:"Accessible Beige",hex:"#D4CFC4",accent:"#C4BDB0"},{name:"Drift of Mist",hex:"#E8E3DB",accent:"#D9D2C7"},{name:"Naval",hex:"#1F3A5F",accent:"#2A4D7A"},{name:"Evergreen Fog",hex:"#95978A",accent:"#7D8070"},{name:"Iron Ore",hex:"#434343",accent:"#5A5A5A"},{name:"Urbane Bronze",hex:"#54504A",accent:"#6B665E"},{name:"Hale Navy",hex:"#2D3A4B",accent:"#3D4D63"},{name:"Watery",hex:"#A4D4D4",accent:"#8FC4C4"},{name:"Raindrops",hex:"#B1C4D4",accent:"#9BB0C2"},{name:"Jade Dragon",hex:"#5A7D5A",accent:"#6B9070"},{name:"Sage Green",hex:"#9CAF88",accent:"#8A9D76"},{name:"Peppercorn",hex:"#6C6C6C",accent:"#7D7D7D"},{name:"Colonel Sanders",hex:"#8B6F47",accent:"#9D7F57"},{name:"Copper Penny",hex:"#AD6F69",accent:"#BD7F79"},{name:"Coral Reef",hex:"#D9776B",accent:"#E1877B"}];function r(){let[e,r]=(0,s.useState)(0),[n,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setInterval(()=>{i(!0),setTimeout(()=>{r(e=>(e+1)%a.length),i(!1)},1e3)},8e3);return()=>clearInterval(e)},[]);let o=a[e];return(0,s.useEffect)(()=>{let e=document.documentElement;e.style.setProperty("--theme-transition","2s ease-in-out"),e.style.setProperty("--theme-primary",o.hex),e.style.setProperty("--theme-accent",o.accent)},[o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-0 transition-opacity duration-[2000ms]",style:{background:`linear-gradient(135deg, 
            ${o.hex}08 0%, 
            ${o.hex}15 50%, 
            ${o.accent}12 100%)`,opacity:n?.6:1}}),(0,t.jsx)("div",{className:"fixed bottom-4 sm:bottom-6 left-1/2 -translate-x-1/2 pointer-events-none z-10",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 bg-white/95 backdrop-blur-sm px-2.5 sm:px-4 py-1.5 sm:py-2.5 rounded-lg sm:rounded-xl shadow-lg border border-stone-200 transition-all duration-1000",children:[(0,t.jsx)("div",{className:"relative w-10 h-8 sm:w-16 sm:h-12 rounded-md sm:rounded-lg shadow-md transition-all duration-[2000ms] transform",style:{backgroundColor:o.hex,transform:n?"scale(0.95) rotate(-2deg)":"scale(1) rotate(0deg)"},children:(0,t.jsx)("div",{className:"absolute inset-0 rounded-md sm:rounded-lg bg-gradient-to-br from-white/40 via-transparent to-transparent"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-stone-500 font-medium",children:"Sherwin-Williams"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-stone-800 transition-opacity duration-500",style:{opacity:n?.5:1},children:o.name})]})]})}),(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        .themed-button {
          background-color: var(--theme-primary) !important;
          transition: background-color var(--theme-transition), transform 0.2s !important;
        }
        
        .themed-button:hover {
          background-color: var(--theme-accent) !important;
          transform: translateY(-1px);
        }

        .themed-badge {
          background-color: var(--theme-primary) !important;
          color: #1c1917 !important;
          transition: background-color var(--theme-transition) !important;
        }

        .themed-accent {
          color: var(--theme-accent) !important;
          transition: color var(--theme-transition) !important;
        }

        .themed-border {
          border-color: var(--theme-primary) !important;
          transition: border-color var(--theme-transition) !important;
        }
      `}})]})}e.s(["PaintChipAnimator",()=>r])},90833,e=>{"use strict";let t=(0,e.i(75254).default)("paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);e.s(["Paintbrush",()=>t],90833)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},24470,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654),r=e.i(43531);let n=s.forwardRef(({className:e,...s},n)=>(0,t.jsxs)("div",{className:"relative inline-flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",className:"peer sr-only",ref:n,...s}),(0,t.jsx)("div",{className:(0,a.cn)("h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 peer-checked:bg-primary peer-checked:text-primary-foreground flex items-center justify-center",e),children:(0,t.jsx)(r.Check,{className:"h-3 w-3 opacity-0 peer-checked:opacity-100"})})]}));n.displayName="Checkbox";let i=s.forwardRef(({className:e,checked:s,onChange:n,...i},o)=>(0,t.jsxs)("button",{type:"button",role:"checkbox","aria-checked":s,className:(0,a.cn)("h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center transition-colors",s&&"bg-primary text-primary-foreground",e),onClick:()=>{n&&n({target:{checked:!s}})},children:[(0,t.jsx)("input",{type:"checkbox",className:"sr-only",ref:o,checked:s,onChange:n,...i}),s&&(0,t.jsx)(r.Check,{className:"h-3 w-3"})]}));i.displayName="SimpleCheckbox",e.s(["Checkbox",()=>n,"SimpleCheckbox",()=>i])},82944,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654),r=e.i(40574),n=e.i(34763),i=e.i(95613),o=e.i(63876),c=e.i(80720),l=e.i(7003),d=e.i(90833),m=e.i(69638),u=e.i(46897),x=e.i(84614),h=e.i(25823),p=e.i(24470),f=e.i(34098);function g({estimate:e,token:a,onSignoffComplete:i,companyLogo:o,companyName:l}){let[m,u]=(0,s.useState)(""),[x,h]=(0,s.useState)(!1),[g,j]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[k,_]=(0,s.useState)(null),D=e.line_items.map(e=>{let t=[e.name];return e.description&&t.push(e.description),t.join(" - ")}),S=e.materials?.map(e=>{let t=[];return e.paint_product&&t.push(e.paint_product),e.product_line&&t.push(e.product_line),e.color_name&&t.push(e.color_name),e.color_code&&t.push(`(${e.color_code})`),e.sheen&&t.push(`- ${e.sheen}`),e.quantity_gallons&&t.push(`${e.quantity_gallons} gal`),t.join(" ")})||[],A=Array.from(new Set(e.materials?.map(e=>e.area_description).filter(e=>e)||[])),B=m.trim()&&x&&g&&v&&y;async function E(e){if(e.preventDefault(),!B)return void _("Please complete all required fields and acknowledgments");C(!0),_(null);try{let e=await fetch(`/api/estimates/${a}/signoff`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_name:m,acknowledged_scope:x,acknowledged_materials:g,acknowledged_areas:v,acknowledged_terms:y})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to submit signoff");i()}catch(e){_(e instanceof Error?e.message:"An error occurred")}finally{C(!1)}}return(0,t.jsxs)("div",{className:"space-y-6",children:[(o||l)&&(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b",children:[o?(0,t.jsx)("img",{src:o,alt:l||"Company Logo",className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-stone-800 flex items-center justify-center",children:(0,t.jsx)(d.Paintbrush,{className:"w-5 h-5 text-white"})}),l&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold",children:l}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Customer Agreement"})]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Customer Agreement Required"}),(0,t.jsx)(n.CardDescription,{children:"Please review the following details and provide your acknowledgment before proceeding."})]}),(0,t.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"Scope of Work"}),(0,t.jsx)("div",{className:"bg-muted p-3 rounded-lg space-y-1",children:D.length>0?D.map((e,s)=>(0,t.jsxs)("div",{className:"text-sm",children:["• ",e]},s)):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No scope items specified"})})]}),S.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"Paint Products & Materials"}),(0,t.jsx)("div",{className:"bg-muted p-3 rounded-lg space-y-1",children:S.map((e,s)=>(0,t.jsxs)("div",{className:"text-sm",children:["• ",e]},s))})]}),A.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"Areas Included"}),(0,t.jsx)("div",{className:"bg-muted p-3 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm",children:A.join(", ")})})]}),(0,t.jsxs)("form",{onSubmit:E,className:"space-y-4 pt-4 border-t",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:"Acknowledgments"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"ack-scope",checked:x,onChange:e=>h(e.target.checked)}),(0,t.jsx)(c.Label,{htmlFor:"ack-scope",className:"text-sm leading-tight cursor-pointer",children:"I acknowledge and agree to the scope of work as described above"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"ack-materials",checked:g,onChange:e=>j(e.target.checked)}),(0,t.jsx)(c.Label,{htmlFor:"ack-materials",className:"text-sm leading-tight cursor-pointer",children:"I acknowledge the paint products and materials that will be used"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"ack-areas",checked:v,onChange:e=>b(e.target.checked)}),(0,t.jsx)(c.Label,{htmlFor:"ack-areas",className:"text-sm leading-tight cursor-pointer",children:"I acknowledge the areas to be painted as specified"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"ack-terms",checked:y,onChange:e=>N(e.target.checked)}),(0,t.jsx)(c.Label,{htmlFor:"ack-terms",className:"text-sm leading-tight cursor-pointer",children:"I understand that this agreement is binding and agree to the terms of this estimate"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,t.jsx)(c.Label,{htmlFor:"customer-name",children:"Your Full Name *"}),(0,t.jsx)(f.Input,{id:"customer-name",type:"text",placeholder:"Enter your full name",value:m,onChange:e=>u(e.target.value),required:!0})]}),k&&(0,t.jsx)("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:k})}),(0,t.jsx)(r.Button,{type:"submit",className:"w-full",disabled:!B||w,children:w?"Submitting...":"Submit Agreement"})]})]})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground text-center",children:"By submitting this agreement, you confirm that you have reviewed and agreed to all the details above. Your IP address and timestamp will be recorded for verification purposes."})]})}function j({estimate:e,token:p}){let[f,j]=(0,s.useState)(e),[v,b]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)("accepted"===f.status),[k,_]=(0,s.useState)("denied"===f.status),[D,S]=(0,s.useState)(""),[A,B]=(0,s.useState)(!1),[E,F]=(0,s.useState)(!1),[P,T]=(0,s.useState)(""),[L,R]=(0,s.useState)(f.requires_signoff&&!f.signoff_completed_at),O=f.labor_total||f.line_items.reduce((e,t)=>e+t.price,0),z=f.job?[f.job.address1,f.job.city,f.job.state,f.job.zip].filter(Boolean).join(", "):"";async function I(){b(!0),S(""),B(!1);try{let e=await fetch(`/api/estimates/${p}/accept`,{method:"POST"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to accept estimate")}C(!0),j(e=>({...e,status:"accepted",accepted_at:new Date().toISOString()}))}catch(e){S(e instanceof Error?e.message:"Something went wrong")}finally{b(!1)}}async function q(){N(!0),S(""),F(!1);try{let e=await fetch(`/api/estimates/${p}/deny`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:P||null})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to deny estimate")}_(!0),j(e=>({...e,status:"denied",denied_at:new Date().toISOString(),denial_reason:P||null}))}catch(e){S(e instanceof Error?e.message:"Something went wrong")}finally{N(!1)}}return w?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 via-stone-50 to-white flex items-center justify-center p-4 relative",children:[(0,t.jsx)(h.PaintChipAnimator,{}),(0,t.jsx)(n.Card,{className:"w-full max-w-md text-center relative z-20",children:(0,t.jsxs)(n.CardContent,{className:"pt-8 pb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-success/10 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(m.CheckCircle,{className:"w-8 h-8 text-success"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Estimate Accepted!"}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-6",children:["Thank you for accepting this estimate. ",f.company?.name," will be in touch soon to schedule your project."]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Accepted on ",(0,a.formatDate)(f.accepted_at||new Date().toISOString())]})]})})]}):k?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 via-stone-50 to-white flex items-center justify-center p-4 relative",children:[(0,t.jsx)(h.PaintChipAnimator,{}),(0,t.jsx)(n.Card,{className:"w-full max-w-md text-center relative z-20",children:(0,t.jsxs)(n.CardContent,{className:"pt-8 pb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-orange-100 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Estimate Declined"}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-4",children:["Thank you for your response. ",f.company?.name," has been notified of your decision."]}),f.denial_reason&&(0,t.jsxs)("div",{className:"text-sm text-left bg-muted p-3 rounded-lg mb-4",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Your feedback:"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:f.denial_reason})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Declined on ",(0,a.formatDate)(f.denied_at||new Date().toISOString())]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-4",children:[f.company?.name," may follow up with a revised estimate."]})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 via-stone-50 to-white relative",children:[(0,t.jsx)("header",{className:"border-b bg-card/80 backdrop-blur-sm sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center gap-3",children:[f.company?.logo_url?(0,t.jsx)("img",{src:f.company.logo_url,alt:f.company?.name||"Company Logo",className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-stone-800 flex items-center justify-center",children:(0,t.jsx)(d.Paintbrush,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold",children:f.company?.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Estimate"})]})]})}),(0,t.jsxs)("main",{className:"max-w-2xl mx-auto p-4 py-8 space-y-6",children:[(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.CardTitle,{className:"text-xl",children:["Estimate for ",f.customer?.name||"Your Project"]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Created ",(0,a.formatDate)(f.created_at)]})]}),(0,t.jsx)(i.Badge,{variant:"secondary",children:f.status})]})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[f.customer&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(x.User,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:f.customer.name})]}),z&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)(u.MapPin,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),(0,t.jsx)("span",{children:z})]})]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Estimate Details"})}),(0,t.jsx)(n.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"divide-y",children:f.line_items.map(e=>{let s=e.product_line||e.paint_color_name_or_code||e.sheen||e.gallons_estimate,r=f.materials?.filter(t=>t.estimate_line_item_id===e.id||t.area_description?.toLowerCase().includes(e.name?.toLowerCase())||e.name?.toLowerCase().includes(t.area_description?.toLowerCase()||""))||[];return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),e.sqft&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.sqft," sqft",e.rate_per_sqft&&` @ ${(0,a.formatCurrency)(e.rate_per_sqft)}/sqft`]})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,t.jsx)("p",{className:"font-medium ml-4 shrink-0",children:(0,a.formatCurrency)(e.price)})]}),r.length>0&&(0,t.jsx)("div",{className:"ml-0 mt-3 space-y-2 border-l-2 border-muted pl-3",children:r.map(e=>(0,t.jsx)("div",{className:"text-sm",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 text-muted-foreground",children:[e.paint_product&&(0,t.jsxs)("div",{className:"font-medium text-foreground",children:[e.paint_product,e.product_line&&` ${e.product_line}`]}),!e.paint_product&&(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.name}),(0,t.jsxs)("div",{children:[e.color_name&&(0,t.jsx)("span",{children:e.color_name}),e.color_code&&(0,t.jsxs)("span",{className:"ml-1 text-xs",children:["(",e.color_code,")"]}),e.sheen&&(0,t.jsxs)("span",{className:"ml-1",children:["- ",e.sheen]})]})]}),e.quantity_gallons&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground shrink-0",children:[e.quantity_gallons," ",1===e.quantity_gallons?"gallon":"gallons"]})]})},e.id))}),0===r.length&&s&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-2 space-y-0.5",children:[(e.product_line||e.paint_color_name_or_code||e.sheen)&&(0,t.jsxs)("div",{children:[e.product_line&&(0,t.jsxs)("span",{children:[e.product_line," "]}),e.paint_color_name_or_code&&(0,t.jsxs)("span",{children:[e.paint_color_name_or_code," "]}),e.sheen&&(0,t.jsxs)("span",{children:["- ",e.sheen]})]}),e.gallons_estimate&&(0,t.jsxs)("div",{children:[e.gallons_estimate," gallons"]})]})]},e.id)})})})]}),(0,t.jsx)(n.Card,{children:(0,t.jsx)(n.CardContent,{className:"p-6 pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-xl font-bold",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{children:(0,a.formatCurrency)(O)})]})})}),L?(0,t.jsx)(g,{estimate:f,token:p,onSignoffComplete:function(){R(!1),j(e=>({...e,signoff_completed_at:new Date().toISOString()}))},companyLogo:f.company?.logo_url,companyName:f.company?.name}):(0,t.jsxs)("div",{className:"space-y-3",children:[D&&(0,t.jsx)("p",{className:"text-sm text-destructive text-center",children:D}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:grid sm:grid-cols-2 gap-3",children:[(0,t.jsx)(r.Button,{size:"lg",variant:"outline",className:"w-full",onClick:()=>F(!0),children:"Decline"}),(0,t.jsx)(r.Button,{size:"lg",className:"w-full",onClick:()=>B(!0),children:"Accept Estimate"})]}),(0,t.jsxs)("p",{className:"text-xs text-center text-muted-foreground",children:["Review the ",(0,a.formatCurrency)(O)," estimate above and choose to accept or decline."]})]}),(f.company?.contact_phone||f.company?.contact_email)&&(0,t.jsxs)("div",{className:"mt-8 pt-6 border-t text-center text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:f.company?.name}),f.company?.contact_phone&&(0,t.jsx)("p",{children:f.company.contact_phone}),f.company?.contact_email&&(0,t.jsx)("p",{children:f.company.contact_email})]})]}),(0,t.jsx)(l.Dialog,{open:A,onOpenChange:B,children:(0,t.jsxs)(l.DialogContent,{children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsx)(l.DialogTitle,{children:"Accept This Estimate?"}),(0,t.jsxs)(l.DialogDescription,{children:["By accepting this ",(0,a.formatCurrency)(O)," estimate, you agree to proceed with the project.",f.company?.name," will contact you to schedule the work."]})]}),(0,t.jsxs)(l.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),(0,t.jsx)(r.Button,{onClick:I,loading:v,children:"Yes, Accept Estimate"})]})]})}),(0,t.jsx)(l.Dialog,{open:E,onOpenChange:F,children:(0,t.jsxs)(l.DialogContent,{children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsx)(l.DialogTitle,{children:"Decline This Estimate?"}),(0,t.jsxs)(l.DialogDescription,{children:["Let ",f.company?.name," know why you're declining. They may be able to adjust the estimate to better meet your needs."]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"reason",children:"Reason for declining (optional)"}),(0,t.jsx)(o.Textarea,{id:"reason",placeholder:"e.g., Price is too high, timeline doesn't work, found another contractor...",value:P,onChange:e=>T(e.target.value),rows:4}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Your feedback helps ",f.company?.name," provide better service."]})]})}),(0,t.jsxs)(l.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{F(!1),T("")},children:"Cancel"}),(0,t.jsx)(r.Button,{variant:"destructive",onClick:q,loading:y,children:"Decline Estimate"})]})]})}),!w&&!k&&(0,t.jsx)(h.PaintChipAnimator,{})]})}e.s(["PublicEstimateView",()=>j],82944)}]);