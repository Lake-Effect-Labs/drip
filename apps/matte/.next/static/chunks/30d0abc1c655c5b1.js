(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95613,e=>{"use strict";var t=e.i(43476),s=e.i(25913);e.i(87467);var a=e.i(55654);let r=(0,s.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow",success:"border-transparent bg-success text-success-foreground shadow",warning:"border-transparent bg-warning text-warning-foreground shadow",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...i}){return(0,t.jsx)("div",{className:(0,a.cn)(r({variant:s}),e),...i})}e.s(["Badge",()=>i])},524,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,error:s,children:r,...i},n)=>(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("select",{className:(0,a.cn)("flex h-9 w-full appearance-none rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s&&"border-destructive focus-visible:ring-destructive",e),ref:n,...i,children:r}),s&&(0,t.jsx)("p",{className:"mt-1 text-xs text-destructive",children:s})]}));r.displayName="Select",e.s(["Select",()=>r])},63876,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,error:s,...r},i)=>(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s&&"border-destructive focus-visible:ring-destructive",e),ref:i,...r}),s&&(0,t.jsx)("p",{className:"mt-1 text-xs text-destructive",children:s})]}));r.displayName="Textarea",e.s(["Textarea",()=>r])},34098,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,type:s,error:r,...i},n)=>(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r&&"border-destructive focus-visible:ring-destructive",e),ref:n,...i}),r&&(0,t.jsx)("p",{className:"mt-1 text-xs text-destructive",children:r})]}));r.displayName="Input",e.s(["Input",()=>r])},40574,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25913);e.i(87467);var r=e.i(55654),i=e.i(31278);let n=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef(({className:e,variant:s,size:a,loading:l,children:d,disabled:o,...c},u)=>(0,t.jsxs)("button",{className:(0,r.cn)(n({variant:s,size:a,className:e})),ref:u,disabled:o||l,...c,children:[l&&(0,t.jsx)(i.Loader2,{className:"animate-spin"}),d]}));l.displayName="Button",e.s(["Button",()=>l])},25913,e=>{"use strict";var t=e.i(7670);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=t.clsx;e.s(["cva",0,(e,t)=>r=>{var i;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:l}=t,d=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let i=s(t)||s(a);return n[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{});return a(e,d,null==t||null==(i=t.compoundVariants)?void 0:i.reduce((e,t)=>{let{class:s,className:a,...r}=t;return Object.entries(r).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...o}[t]):({...l,...o})[t]===s})?[...e,s,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},80720,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("label",{ref:r,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));r.displayName="Label",e.s(["Label",()=>r])},7003,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654),r=e.i(37727);let i=s.createContext(void 0);function n({children:e,open:a,onOpenChange:r}){let[n,l]=s.useState(!1);return(0,t.jsx)(i.Provider,{value:{open:a??n,setOpen:r??l},children:e})}function l({children:e,className:n}){let{open:l,setOpen:d}=function(){let e=s.useContext(i);if(!e)throw Error("useDialog must be used within a Dialog");return e}();return(s.useEffect(()=>{let e=e=>{"Escape"===e.key&&d(!1)};return l&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[l,d]),l)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 animate-fade-in",onClick:()=>d(!1)}),(0,t.jsxs)("div",{className:(0,a.cn)("relative z-50 w-full max-w-lg max-h-[90vh] overflow-auto rounded-lg bg-card p-4 sm:p-6 shadow-lg animate-slide-up",n),children:[(0,t.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>d(!1),children:[(0,t.jsx)(r.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),e]})]}):null}function d({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s})}function o({className:e,...s}){return(0,t.jsx)("h2",{className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",e),...s})}function c({className:e,...s}){return(0,t.jsx)("p",{className:(0,a.cn)("text-sm text-muted-foreground",e),...s})}function u({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s})}e.s(["Dialog",()=>n,"DialogContent",()=>l,"DialogDescription",()=>c,"DialogFooter",()=>u,"DialogHeader",()=>d,"DialogTitle",()=>o])},63727,e=>{"use strict";let t=(0,e.i(75254).default)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);e.s(["Briefcase",()=>t],63727)},88844,e=>{"use strict";let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},48137,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(87467);var a=e.i(55654);let r=s.createContext(void 0);function i(){let e=s.useContext(r);if(!e)throw Error("useTabs must be used within a Tabs");return e}function n({children:e,defaultValue:i,value:n,onValueChange:l,className:d}){let[o,c]=s.useState(i??"");return(0,t.jsx)(r.Provider,{value:{value:n??o,onValueChange:l??c},children:(0,t.jsx)("div",{className:(0,a.cn)("w-full",d),children:e})})}function l({children:e,className:s}){return(0,t.jsx)("div",{className:(0,a.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),children:e})}function d({children:e,value:s,className:r,disabled:n}){let{value:l,onValueChange:d}=i(),o=l===s;return(0,t.jsx)("button",{type:"button",role:"tab","aria-selected":o,disabled:n,className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",o&&"bg-background text-foreground shadow",r),onClick:()=>d(s),children:e})}function o({children:e,value:s,className:r}){let{value:n}=i();return n!==s?null:(0,t.jsx)("div",{role:"tabpanel",className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),children:e})}e.s(["Tabs",()=>n,"TabsContent",()=>o,"TabsList",()=>l,"TabsTrigger",()=>d])},15404,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(26293),r=e.i(40574),i=e.i(34098),n=e.i(80720),l=e.i(524),d=e.i(95613),o=e.i(48137),c=e.i(7003),u=e.i(69481),m=e.i(63876),h=e.i(7233),x=e.i(88844),f=e.i(75254);let p=(0,f.default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var v=e.i(88699),g=e.i(27612),b=e.i(69638),j=e.i(63727);let y=(0,f.default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),N=["each","gal","box","roll","pack","can","tube"],w=[{value:"paint",label:"Paint"},{value:"primer",label:"Primer"},{value:"sundries",label:"Sundries"},{value:"tools",label:"Tools"}];function k({initialItems:e,pickupLocations:f,companyId:v,jobMaterials:g}){let[b,k]=(0,s.useState)(e),[C,T]=(0,s.useState)(g),[I,M]=(0,s.useState)(!1),[B,L]=(0,s.useState)(null),{addToast:A}=(0,u.useToast)(),F=(0,a.createClient)();(0,s.useEffect)(()=>{async function e(){let{data:e}=await F.from("job_materials").select(`
          *,
          job:jobs!inner(
            id,
            title,
            status,
            company_id
          )
        `).eq("job.company_id",v).in("job.status",["new","quoted","scheduled","in_progress"]).is("purchased_at",null);e&&T(e)}let t=F.channel(`inventory-job-materials-${v}`).on("postgres_changes",{event:"*",schema:"public",table:"job_materials"},()=>{e()}).on("postgres_changes",{event:"*",schema:"public",table:"jobs",filter:`company_id=eq.${v}`},()=>{e()}).subscribe();return()=>{F.removeChannel(t)}},[v,F]);let[D,q]=(0,s.useState)(""),[P,z]=(0,s.useState)("sundries"),[E,O]=(0,s.useState)("each"),[V,H]=(0,s.useState)(""),[R,U]=(0,s.useState)(""),[$,W]=(0,s.useState)(""),[K,J]=(0,s.useState)("Sherwin-Williams"),[Q,X]=(0,s.useState)(""),[G,Y]=(0,s.useState)(""),[Z,ee]=(0,s.useState)(!1),et=(0,s.useMemo)(()=>{let e=new Map;C.forEach(t=>{let s=t.inventory_item_id||`unlinked_${t.name.toLowerCase()}`,a=e.get(s),r=t.quantity_decimal||0;if(a)a.totalNeeded+=r,a.jobIds.push(t.job.id),a.jobTitles.push(t.job.title),a.jobMaterialIds.push(t.id);else{let a=t.inventory_item_id?b.find(e=>e.id===t.inventory_item_id):null,i=a?.on_hand||0,n=a?.preferred_pickup_location_id||null,l=a?.pickup_location?.name||null;e.set(s,{inventoryItemId:t.inventory_item_id,name:t.name,totalNeeded:r,unit:t.unit||a?.unit||"each",storeId:n,storeName:l,onHand:i,quantityStillNeeded:Math.max(r-i,0),jobIds:[t.job.id],jobTitles:[t.job.title],jobMaterialIds:[t.id]})}}),Array.from(e.values()).forEach(e=>{e.quantityStillNeeded=Math.max(e.totalNeeded-e.onHand,0)});let t=Array.from(e.values()).filter(e=>e.quantityStillNeeded>0),s={"No Store":[]};return t.forEach(e=>{let t=e.storeName||"No Store";s[t]||(s[t]=[]),s[t].push(e)}),s},[C,b]),es=(0,s.useMemo)(()=>Object.values(et).flat().filter(e=>!e.inventoryItemId),[et]);function ea(){q(""),z("sundries"),O("each"),H(""),U(""),W(""),J("Sherwin-Williams"),X(""),Y(""),L(null)}function er(){ea(),M(!0)}async function ei(e){if(e.preventDefault(),D.trim()){ee(!0);try{let e={company_id:v,name:D.trim(),category:P,unit:E,on_hand:parseInt(V)||0,reorder_at:parseInt(R)||0,cost_per_unit:$?parseFloat($):null,vendor_name:K||null,vendor_sku:Q||null,preferred_pickup_location_id:null,notes:G||null};if(B){let{data:t,error:s}=await F.from("inventory_items").update(e).eq("id",B.id).select("*").single();if(s)throw s;let a=f.find(e=>e.id===t.preferred_pickup_location_id)||null,r={...t,pickup_location:a};k(e=>e.map(e=>e.id===B.id?r:e)),A("Item updated!","success")}else{let{data:t,error:s}=await F.from("inventory_items").insert(e).select("*").single();if(s)throw s;let a=f.find(e=>e.id===t.preferred_pickup_location_id)||null,r={...t,pickup_location:a};k(e=>[...e,r].sort((e,t)=>e.name.localeCompare(t.name))),A("Item added!","success")}M(!1),ea()}catch(e){console.error("Error saving item:",e),A("Failed to save item","error")}finally{ee(!1)}}}async function en(e){if(!confirm("Delete this item?"))return;let{error:t}=await F.from("inventory_items").delete().eq("id",e);t?A("Failed to delete item","error"):(k(t=>t.filter(t=>t.id!==e)),A("Item deleted","success"))}async function el(e,t){let{error:s}=await F.from("inventory_items").update({on_hand:t}).eq("id",e);s?A("Failed to update quantity","error"):k(s=>s.map(s=>s.id===e?{...s,on_hand:t}:s))}async function ed(e,t,s){try{let{error:a}=await F.from("job_materials").update({purchased_at:new Date().toISOString()}).in("id",e);if(a)throw a;if(t){let e=b.find(e=>e.id===t);if(e){let a=e.on_hand+s;await el(t,a)}}T(t=>t.filter(t=>!e.includes(t.id))),A("Marked as purchased!","success")}catch(e){console.error("Error marking as purchased:",e),A("Failed to mark as purchased","error")}}let eo=Object.values(et).flat().length;return(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 border-b bg-card p-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Inventory"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[b.length," item",1!==b.length?"s":""," •"," ",eo," needed for jobs"]})]}),(0,t.jsxs)(r.Button,{onClick:er,children:[(0,t.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Add Item"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,t.jsxs)(o.Tabs,{defaultValue:"all",className:"w-full",children:[(0,t.jsxs)(o.TabsList,{children:[(0,t.jsxs)(o.TabsTrigger,{value:"all",children:["All Items (",b.length,")"]}),(0,t.jsxs)(o.TabsTrigger,{value:"needed",children:[(0,t.jsx)(j.Briefcase,{className:"mr-1.5 h-3.5 w-3.5"}),"Needed for Jobs (",eo,")"]}),(0,t.jsxs)(o.TabsTrigger,{value:"buy",children:[(0,t.jsx)(p,{className:"mr-1.5 h-3.5 w-3.5"}),"Buy List (",es.length,")"]}),(0,t.jsxs)(o.TabsTrigger,{value:"stores",children:[(0,t.jsx)(y,{className:"mr-1.5 h-3.5 w-3.5"}),"Stores (",f.length,")"]})]}),(0,t.jsx)(o.TabsContent,{value:"all",className:"mt-4",children:0===b.length?(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-8 text-center",children:[(0,t.jsx)(x.Package,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No inventory items yet"}),(0,t.jsx)(r.Button,{onClick:er,className:"mt-4",children:"Add your first item"})]}):(0,t.jsx)("div",{className:"rounded-lg border bg-card divide-y",children:b.map(e=>(0,t.jsx)(_,{item:e,onEdit:()=>{L(e),q(e.name),z(e.category),O(e.unit),H(e.on_hand.toString()),U(e.reorder_at.toString()),W(e.cost_per_unit?.toString()||""),J(e.vendor_name||"Sherwin-Williams"),X(e.vendor_sku||""),Y(e.notes||""),M(!0)},onDelete:()=>en(e.id),onUpdateQuantity:t=>el(e.id,t)},e.id))})}),(0,t.jsx)(o.TabsContent,{value:"needed",className:"mt-4",children:0===eo?(0,t.jsx)("div",{className:"rounded-lg border bg-card p-8 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No materials needed for active jobs!"})}):(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(et).map(([e,s])=>s.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:e}),(0,t.jsx)("div",{className:"rounded-lg border bg-card divide-y",children:s.map(e=>(0,t.jsx)(S,{need:e,onMarkAsPurchased:t=>ed(e.jobMaterialIds,e.inventoryItemId,t)},e.inventoryItemId||e.name))})]},e))})}),(0,t.jsx)(o.TabsContent,{value:"buy",className:"mt-4",children:0===es.length?(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-8 text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nothing to buy!"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"All materials needed for jobs are already in your inventory."})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"rounded-lg border bg-card divide-y",children:es.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Need ",e.quantityStillNeeded.toFixed(2)," ",e.unit]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["For ",e.jobTitles.length," job",1!==e.jobTitles.length?"s":"",": ",e.jobTitles.join(", ")]}),e.storeName&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Store: ",e.storeName]})]}),(0,t.jsxs)(d.Badge,{variant:"warning",children:[e.quantityStillNeeded.toFixed(2)," ",e.unit]})]},e.inventoryItemId||e.name||s))}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"These items are needed for jobs but aren't in your inventory. Add them to your inventory or purchase them directly."})]})}),(0,t.jsx)(o.TabsContent,{value:"stores",className:"mt-4",children:0===f.length?(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-8 text-center",children:[(0,t.jsx)(y,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No pickup locations configured yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Add stores or pickup locations in Settings to track where you purchase materials."})]}):(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:f.map(e=>{let s=b.filter(t=>t.preferred_pickup_location_id===e.id);return(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),e.address1&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[e.address1,e.city&&`, ${e.city}`,e.state&&`, ${e.state}`]})]}),(0,t.jsx)(d.Badge,{variant:"default",children:s.length})]}),e.notes&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:e.notes}),s.length>0&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Items from this store:"}),(0,t.jsxs)("div",{className:"space-y-1",children:[s.slice(0,5).map(e=>(0,t.jsxs)("p",{className:"text-xs truncate",children:["• ",e.name]},e.id)),s.length>5&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",s.length-5," more"]})]})]})]},e.id)})})})]})}),(0,t.jsx)(c.Dialog,{open:I,onOpenChange:M,children:(0,t.jsxs)(c.DialogContent,{children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{children:B?"Edit Item":"Add Inventory Item"}),(0,t.jsx)(c.DialogDescription,{children:"Track supplies to know when you need to restock."})]}),(0,t.jsxs)("form",{onSubmit:ei,className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,t.jsx)(n.Label,{htmlFor:"name",children:"Item Name *"}),(0,t.jsx)(i.Input,{id:"name",placeholder:"e.g., Painter's Tape 2in",value:D,onChange:e=>q(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"category",children:"Category"}),(0,t.jsx)(l.Select,{id:"category",value:P,onChange:e=>z(e.target.value),children:w.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"unit",children:"Unit"}),(0,t.jsx)(l.Select,{id:"unit",value:E,onChange:e=>O(e.target.value),children:N.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"onHand",children:"On Hand"}),(0,t.jsx)(i.Input,{id:"onHand",type:"number",min:"0",value:V,onChange:e=>H(e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"reorderAt",children:"Reorder At"}),(0,t.jsx)(i.Input,{id:"reorderAt",type:"number",min:"0",value:R,onChange:e=>U(e.target.value),placeholder:"5"})]}),(0,t.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,t.jsx)(n.Label,{htmlFor:"costPerUnit",children:"Cost per Unit ($)"}),(0,t.jsx)(i.Input,{id:"costPerUnit",type:"number",step:"0.01",min:"0",value:$,onChange:e=>W(e.target.value),placeholder:"0.00"})]})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Vendor Info (optional)"}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"vendorName",children:"Vendor"}),(0,t.jsx)(i.Input,{id:"vendorName",value:K,onChange:e=>J(e.target.value),placeholder:"Sherwin-Williams"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"vendorSku",children:"SKU"}),(0,t.jsx)(i.Input,{id:"vendorSku",value:Q,onChange:e=>X(e.target.value),placeholder:"SW-12345"})]}),(0,t.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,t.jsx)(n.Label,{htmlFor:"notes",children:"Notes"}),(0,t.jsx)(m.Textarea,{id:"notes",value:G,onChange:e=>Y(e.target.value),placeholder:"Optional notes about this item",rows:2})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,t.jsx)(r.Button,{type:"submit",loading:Z,children:B?"Save Changes":"Add Item"})]})]})]})})]})}function _({item:e,onEdit:s,onDelete:a,onUpdateQuantity:i,showWarning:n}){let l=e.on_hand<=e.reorder_at;return(0,t.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium truncate",children:e.name}),l&&n&&(0,t.jsx)(d.Badge,{variant:"warning",className:"shrink-0",children:"Low"}),(0,t.jsx)(d.Badge,{variant:"default",className:"shrink-0 text-xs",children:e.category})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.on_hand," ",e.unit," on hand",e.reorder_at>0&&` • Reorder at ${e.reorder_at}`]}),e.vendor_sku&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["SKU: ",e.vendor_sku]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>i(Math.max(0,e.on_hand-1)),children:"-"}),(0,t.jsx)("span",{className:"w-8 text-center text-sm font-medium",children:e.on_hand}),(0,t.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>i(e.on_hand+1),children:"+"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:s,children:(0,t.jsx)(v.Pencil,{className:"h-4 w-4"})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:a,children:(0,t.jsx)(g.Trash2,{className:"h-4 w-4"})})]})]})}function S({need:e,onMarkAsPurchased:s}){return(0,t.jsxs)("div",{className:"p-4 flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),!e.inventoryItemId&&(0,t.jsx)(d.Badge,{variant:"default",className:"shrink-0 text-xs",children:"Not Linked"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total needed: ",e.totalNeeded.toFixed(2)," ",e.unit," • ","On hand: ",e.onHand," ",e.unit," • ","Still need: ",e.quantityStillNeeded.toFixed(2)," ",e.unit]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["For ",e.jobTitles.length," job",1!==e.jobTitles.length?"s":"",": ",e.jobTitles.join(", ")]})]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>s(e.quantityStillNeeded),children:[(0,t.jsx)(b.CheckCircle,{className:"mr-2 h-4 w-4"}),"Mark as Purchased"]})]})}e.s(["InventoryView",()=>k],15404)}]);