(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34763,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(87467);var a=e.i(55654);let s=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));s.displayName="Card";let i=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let n=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...t}));n.displayName="CardTitle";let o=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let l=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));l.displayName="CardContent",t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>o,"CardHeader",()=>i,"CardTitle",()=>n])},40574,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(25913);e.i(87467);var s=e.i(55654),i=e.i(31278);let n=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef(({className:e,variant:t,size:a,loading:o,children:l,disabled:d,...c},u)=>(0,r.jsxs)("button",{className:(0,s.cn)(n({variant:t,size:a,className:e})),ref:u,disabled:d||o,...c,children:[o&&(0,r.jsx)(i.Loader2,{className:"animate-spin"}),l]}));o.displayName="Button",e.s(["Button",()=>o])},25913,e=>{"use strict";var r=e.i(7670);let t=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.clsx;e.s(["cva",0,(e,r)=>s=>{var i;if((null==r?void 0:r.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:o}=r,l=Object.keys(n).map(e=>{let r=null==s?void 0:s[e],a=null==o?void 0:o[e];if(null===r)return null;let i=t(r)||t(a);return n[e][i]}),d=s&&Object.entries(s).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return a(e,l,null==r||null==(i=r.compoundVariants)?void 0:i.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...o,...d}[r]):({...o,...d})[r]===t})?[...e,t,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}])},31278,e=>{"use strict";let r=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},18566,(e,r,t)=>{r.exports=e.r(76562)},80720,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(87467);var a=e.i(55654);let s=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("label",{ref:s,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));s.displayName="Label",e.s(["Label",()=>s])},34098,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(87467);var a=e.i(55654);let s=t.forwardRef(({className:e,type:t,error:s,...i},n)=>(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("input",{type:t,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s&&"border-destructive focus-visible:ring-destructive",e),ref:n,...i}),s&&(0,r.jsx)("p",{className:"mt-1 text-xs text-destructive",children:s})]}));s.displayName="Input",e.s(["Input",()=>s])},79611,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),s=e.i(22016),i=e.i(26293),n=e.i(40574),o=e.i(34098),l=e.i(80720),d=e.i(34763),c=e.i(69481);function u(){let[e,u]=(0,t.useState)(""),[m,f]=(0,t.useState)(""),[p,h]=(0,t.useState)(""),[v,x]=(0,t.useState)(""),[g,y]=(0,t.useState)(!1),b=(0,a.useRouter)(),{addToast:w}=(0,c.useToast)(),j=(0,i.createClient)();async function N(r){r.preventDefault(),y(!0);try{let r,{data:{user:t}}=await j.auth.getUser(),a=!1;if(t)r=t.id;else{let{data:t,error:s}=await j.auth.signUp({email:e,password:m,options:{data:{full_name:p},emailRedirectTo:`${window.location.origin}/auth/confirm?next=/app`}});if(s){w(s.message,"error"),y(!1);return}if(!t.user){w("Failed to create account","error"),y(!1);return}if(r=t.user.id,null===t.session&&t.user.identities&&0===t.user.identities.length)w("Please check your email to confirm your account before continuing.","success"),a=!0;else if(!t.session){await new Promise(e=>setTimeout(e,1e3));let{data:{session:e}}=await j.auth.getSession();if(!e){w("Please check your email to confirm your account.","success"),y(!1);return}}}if(a)return void y(!1);let{data:s}=await j.from("company_users").select("company_id").eq("user_id",r).maybeSingle();if(s){w("Account already set up! Redirecting...","success"),y(!1),b.push("/app");return}let i=await fetch("/api/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_name:v,owner_id:r,owner_email:e,owner_name:p})});if(!i.ok){let e="Failed to create company";try{e=(await i.json()).error||e}catch{}w(e,"error"),y(!1);return}w("Account created! Redirecting...","success"),b.push("/app")}catch(e){console.error("Signup error:",e),w("An unexpected error occurred","error")}finally{y(!1)}}return(0,t.useEffect)(()=>{!async function(){let{data:{user:e}}=await j.auth.getUser();if(e){let{data:r}=await j.from("company_users").select("company_id").eq("user_id",e.id).maybeSingle();r&&b.push("/app")}}()},[b,j]),(0,r.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,r.jsxs)(d.CardHeader,{className:"text-center",children:[(0,r.jsx)(d.CardTitle,{className:"text-2xl",children:"Create your account"}),(0,r.jsx)(d.CardDescription,{children:"Start your free trial of Matte"})]}),(0,r.jsxs)(d.CardContent,{children:[(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"fullName",children:"Your name"}),(0,r.jsx)(o.Input,{id:"fullName",type:"text",placeholder:"John Smith",value:p,onChange:e=>h(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"companyName",children:"Company name"}),(0,r.jsx)(o.Input,{id:"companyName",type:"text",placeholder:"Smith Painting Co.",value:v,onChange:e=>x(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"email",children:"Email"}),(0,r.jsx)(o.Input,{id:"email",type:"email",placeholder:"you@company.com",value:e,onChange:e=>u(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"password",children:"Password"}),(0,r.jsx)(o.Input,{id:"password",type:"password",placeholder:"••••••••",value:m,onChange:e=>f(e.target.value),minLength:6,required:!0})]}),(0,r.jsx)(n.Button,{type:"submit",className:"w-full",loading:g,children:"Create account"})]}),(0,r.jsxs)("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",(0,r.jsx)(s.default,{href:"/login",className:"text-foreground underline hover:no-underline",children:"Sign in"})]})]})]})}e.s(["default",()=>u])}]);