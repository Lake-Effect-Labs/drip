(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34763,e=>{"use strict";var r=e.i(43476),s=e.i(71645);e.i(87467);var t=e.i(55654);let a=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));a.displayName="Card";let o=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("h3",{ref:a,className:(0,t.cn)("font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let n=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("p",{ref:a,className:(0,t.cn)("text-sm text-muted-foreground",e),...s}));n.displayName="CardDescription";let l=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("p-6 pt-0",e),...s}));l.displayName="CardContent",s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>o,"CardTitle",()=>i])},40574,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(25913);e.i(87467);var a=e.i(55654),o=e.i(31278);let i=(0,t.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),n=s.forwardRef(({className:e,variant:s,size:t,loading:n,children:l,disabled:d,...u},c)=>(0,r.jsxs)("button",{className:(0,a.cn)(i({variant:s,size:t,className:e})),ref:c,disabled:d||n,...u,children:[n&&(0,r.jsx)(o.Loader2,{className:"animate-spin"}),l]}));n.displayName="Button",e.s(["Button",()=>n])},25913,e=>{"use strict";var r=e.i(7670);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,t=r.clsx;e.s(["cva",0,(e,r)=>a=>{var o;if((null==r?void 0:r.variants)==null)return t(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:n}=r,l=Object.keys(i).map(e=>{let r=null==a?void 0:a[e],t=null==n?void 0:n[e];if(null===r)return null;let o=s(r)||s(t);return i[e][o]}),d=a&&Object.entries(a).reduce((e,r)=>{let[s,t]=r;return void 0===t||(e[s]=t),e},{});return t(e,l,null==r||null==(o=r.compoundVariants)?void 0:o.reduce((e,r)=>{let{class:s,className:t,...a}=r;return Object.entries(a).every(e=>{let[r,s]=e;return Array.isArray(s)?s.includes({...n,...d}[r]):({...n,...d})[r]===s})?[...e,s,t]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}])},31278,e=>{"use strict";let r=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},18566,(e,r,s)=>{r.exports=e.r(76562)},80720,e=>{"use strict";var r=e.i(43476),s=e.i(71645);e.i(87467);var t=e.i(55654);let a=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("label",{ref:a,className:(0,t.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));a.displayName="Label",e.s(["Label",()=>a])},34098,e=>{"use strict";var r=e.i(43476),s=e.i(71645);e.i(87467);var t=e.i(55654);let a=s.forwardRef(({className:e,type:s,error:a,...o},i)=>(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("input",{type:s,className:(0,t.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a&&"border-destructive focus-visible:ring-destructive",e),ref:i,...o}),a&&(0,r.jsx)("p",{className:"mt-1 text-xs text-destructive",children:a})]}));a.displayName="Input",e.s(["Input",()=>a])},17850,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(18566),a=e.i(22016),o=e.i(26293),i=e.i(40574),n=e.i(34098),l=e.i(80720),d=e.i(34763),u=e.i(69481);function c(){let[e,c]=(0,s.useState)(""),[m,f]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[w,v]=(0,s.useState)(!1),b=(0,t.useRouter)(),{addToast:y}=(0,u.useToast)(),N=(0,o.createClient)();async function j(r){if(r.preventDefault(),e!==m)return void y("Passwords don't match","error");if(e.length<6)return void y("Password must be at least 6 characters","error");h(!0);try{let{data:{session:r},error:s}=await N.auth.getSession();if(s){console.error("Session error:",s),y("Your reset link has expired. Please request a new one.","error"),setTimeout(()=>b.push("/forgot-password"),2e3),h(!1);return}if(!r){y("Your reset link has expired. Please request a new one.","error"),setTimeout(()=>b.push("/forgot-password"),2e3),h(!1);return}let{data:{session:t},error:a}=await N.auth.getSession();if(a||!t){console.error("No valid session found:",a),y("Your reset session has expired. Please request a new password reset.","error"),h(!1);return}let o=t.user.email;if(console.log("ğŸ”‘ Updating password for user:",o),console.log("Session details:",{email:t.user.email,id:t.user.id,recovery:!!t.user.recovery_sent_at,app_metadata:t.user.app_metadata,user_metadata:t.user.user_metadata}),console.log("Session type check - user ID:",t.user.id),console.log("ğŸ“ Password length:",e.length),e.length<6){y("Password must be at least 6 characters","error"),h(!1);return}console.log("ğŸš€ Calling updateUser with password...");let{data:i,error:n}=await N.auth.updateUser({password:e});if(n){console.error("âŒ Password update error:",n),console.error("Error name:",n.name),console.error("Error message:",n.message),console.error("Error status:",n.status),console.error("Full error:",JSON.stringify(n,null,2)),y(`Failed to update password: ${n.message}. Please try again or request a new reset link.`,"error"),h(!1);return}if(!i||!i.user){console.error("âŒ Password update returned no user data"),console.error("Update data:",i),y("Password update failed - no user data returned. Please try again.","error"),h(!1);return}console.log("âœ… Password updated successfully!"),console.log("Updated user email:",i.user.email),console.log("Updated user ID:",i.user.id),console.log("Updated at:",i.user.updated_at),await new Promise(e=>setTimeout(e,1e3));let{error:l}=await N.auth.refreshSession();l&&console.error("Session refresh error:",l),g(!0),y("Password reset successfully! Redirecting to sign in...","success"),o&&sessionStorage.setItem("resetEmail",o),await new Promise(e=>setTimeout(e,500)),await N.auth.signOut(),setTimeout(()=>{b.push("/login"),b.refresh()},1e3)}catch(e){console.error("Unexpected error:",e),y("An unexpected error occurred. Please try again.","error"),h(!1)}}return((0,s.useEffect)(()=>{!async function(){let{data:{session:e}}=await N.auth.getSession();if(!e){y("Invalid or expired reset link. Please request a new password reset.","error"),setTimeout(()=>b.push("/forgot-password"),2e3);return}v(!0)}()},[b,y,N]),w)?x?(0,r.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,r.jsxs)(d.CardHeader,{className:"text-center",children:[(0,r.jsx)(d.CardTitle,{className:"text-2xl",children:"Password reset!"}),(0,r.jsx)(d.CardDescription,{children:"Your password has been successfully reset"})]}),(0,r.jsxs)(d.CardContent,{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Redirecting to sign in..."}),(0,r.jsx)(i.Button,{onClick:()=>b.push("/login"),className:"w-full",children:"Go to sign in"})]})]}):(0,r.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,r.jsxs)(d.CardHeader,{className:"text-center",children:[(0,r.jsx)(d.CardTitle,{className:"text-2xl",children:"Reset password"}),(0,r.jsx)(d.CardDescription,{children:"Enter your new password"})]}),(0,r.jsxs)(d.CardContent,{children:[(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"password",children:"New password"}),(0,r.jsx)(n.Input,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:e,onChange:e=>c(e.target.value),minLength:6,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"confirmPassword",children:"Confirm password"}),(0,r.jsx)(n.Input,{id:"confirmPassword",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:m,onChange:e=>f(e.target.value),minLength:6,required:!0})]}),(0,r.jsx)(i.Button,{type:"submit",className:"w-full",loading:p,children:"Reset password"})]}),(0,r.jsx)("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:(0,r.jsx)(a.default,{href:"/login",className:"text-foreground underline hover:no-underline",children:"Back to sign in"})})]})]}):(0,r.jsx)(d.Card,{className:"w-full max-w-md",children:(0,r.jsxs)(d.CardHeader,{className:"text-center",children:[(0,r.jsx)(d.CardTitle,{className:"text-2xl",children:"Verifying reset link..."}),(0,r.jsx)(d.CardDescription,{children:"Please wait while we verify your reset link"})]})})}e.s(["default",()=>c])}]);