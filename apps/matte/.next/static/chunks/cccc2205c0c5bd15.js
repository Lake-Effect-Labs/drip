(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40574,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(25913);e.i(87467);var a=e.i(55654),i=e.i(31278);let n=(0,r.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef(({className:e,variant:t,size:r,loading:l,children:c,disabled:d,...o},m)=>(0,s.jsxs)("button",{className:(0,a.cn)(n({variant:t,size:r,className:e})),ref:m,disabled:d||l,...o,children:[l&&(0,s.jsx)(i.Loader2,{className:"animate-spin"}),c]}));l.displayName="Button",e.s(["Button",()=>l])},25913,e=>{"use strict";var s=e.i(7670);let t=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=s.clsx;e.s(["cva",0,(e,s)=>a=>{var i;if((null==s?void 0:s.variants)==null)return r(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:l}=s,c=Object.keys(n).map(e=>{let s=null==a?void 0:a[e],r=null==l?void 0:l[e];if(null===s)return null;let i=t(s)||t(r);return n[e][i]}),d=a&&Object.entries(a).reduce((e,s)=>{let[t,r]=s;return void 0===r||(e[t]=r),e},{});return r(e,c,null==s||null==(i=s.compoundVariants)?void 0:i.reduce((e,s)=>{let{class:t,className:r,...a}=s;return Object.entries(a).every(e=>{let[s,t]=e;return Array.isArray(t)?t.includes({...l,...d}[s]):({...l,...d})[s]===t})?[...e,t,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}])},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},61911,e=>{"use strict";let s=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>s],61911)},22029,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(18566),a=e.i(26293);e.i(87467);var i=e.i(55654),n=e.i(40574),l=e.i(69481),c=e.i(61911),d=e.i(27612);let o=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function m({companyId:e,companyOwnerId:m,currentUserId:u,isOwner:x,teamMembers:h}){let v=(0,r.useRouter)(),{addToast:p}=(0,l.useToast)(),y=(0,a.createClient)(),[f,g]=(0,t.useState)(!1);async function j(){g(!0);try{let s=(0,i.generateToken)(24),t=new Date;t.setDate(t.getDate()+7);let{error:r}=await y.from("invite_links").insert({company_id:e,token:s,expires_at:t.toISOString(),created_by_user_id:u});if(r)throw r;let a=`${window.location.origin}/join/${s}`;(0,i.copyToClipboard)(a),p("Invite link copied! Share it with your crew.","success")}catch{p("Failed to create invite link","error")}finally{g(!1)}}async function b(s){if(s===u)return void p("You cannot remove yourself","error");if(!confirm("Remove this crew member?"))return;let{error:t}=await y.from("company_users").delete().eq("user_id",s).eq("company_id",e);t?p("Failed to remove crew member","error"):(v.refresh(),p("Crew member removed","success"))}return(0,s.jsxs)("div",{className:"min-h-screen pb-20 lg:pb-0",children:[(0,s.jsx)("div",{className:"border-b bg-card p-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(c.Users,{className:"h-6 w-6"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Crew"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your painting crew. Everyone has access to all jobs, customers, and estimates."})]})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Crew Members"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[h.length," ",1===h.length?"member":"members"]})]}),(0,s.jsxs)(n.Button,{onClick:j,loading:f,children:[(0,s.jsx)(o,{className:"mr-2 h-4 w-4"}),"Invite Crew Member"]})]}),(0,s.jsx)("div",{className:"divide-y",children:h.map(e=>(0,s.jsxs)("div",{className:"py-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium",children:e.fullName.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium",children:[e.fullName,e.id===m&&(0,s.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Owner)"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Joined ",(0,i.formatDate)(e.joinedAt)]})]})]}),x&&e.id!==u&&(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>b(e.id),className:"text-destructive hover:text-destructive",children:(0,s.jsx)(d.Trash2,{className:"h-4 w-4"})})]},e.id))})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-muted/50 p-6",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"How it works"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,s.jsx)("span",{children:"Create an invite link and share it with your crew members"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,s.jsx)("span",{children:"They'll create an account and automatically join your company"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,s.jsx)("span",{children:"Everyone sees the same jobs, customers, estimates, and invoices"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,s.jsx)("span",{children:"Invite links expire after 7 days for security"})]})]})]})]})]})}e.s(["CrewView",()=>m],22029)}]);