(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40574,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(25913);e.i(87467);var s=e.i(55654),n=e.i(31278);let i=(0,r.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:a,size:r,loading:c,children:o,disabled:l,...d},m)=>(0,t.jsxs)("button",{className:(0,s.cn)(i({variant:a,size:r,className:e})),ref:m,disabled:l||c,...d,children:[c&&(0,t.jsx)(n.Loader2,{className:"animate-spin"}),o]}));c.displayName="Button",e.s(["Button",()=>c])},25913,e=>{"use strict";var t=e.i(7670);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=t.clsx;e.s(["cva",0,(e,t)=>s=>{var n;if((null==t?void 0:t.variants)==null)return r(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:c}=t,o=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],r=null==c?void 0:c[e];if(null===t)return null;let n=a(t)||a(r);return i[e][n]}),l=s&&Object.entries(s).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return r(e,o,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...c,...l}[t]):({...c,...l})[t]===a})?[...e,a,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},18566,(e,t,a)=>{t.exports=e.r(76562)},34763,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(87467);var r=e.i(55654);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...a}));s.displayName="Card";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle";let c=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));c.displayName="CardDescription";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>c,"CardHeader",()=>n,"CardTitle",()=>i])},25823,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let r=[{name:"Agreeable Gray",hex:"#D1CCC4",accent:"#B8B2A7"},{name:"Repose Gray",hex:"#C8C5BE",accent:"#B0ADA5"},{name:"Worldly Gray",hex:"#D0CCC7",accent:"#B8B3AD"},{name:"Mindful Gray",hex:"#BDB8B0",accent:"#A59F96"},{name:"Sea Salt",hex:"#C5D4C5",accent:"#AEC0AE"},{name:"Alabaster",hex:"#F3EDE5",accent:"#E8DFD3"},{name:"Greek Villa",hex:"#F0EBE0",accent:"#DDD4C5"},{name:"Accessible Beige",hex:"#D4CFC4",accent:"#C4BDB0"},{name:"Drift of Mist",hex:"#E8E3DB",accent:"#D9D2C7"},{name:"Naval",hex:"#1F3A5F",accent:"#2A4D7A"},{name:"Evergreen Fog",hex:"#95978A",accent:"#7D8070"},{name:"Iron Ore",hex:"#434343",accent:"#5A5A5A"},{name:"Urbane Bronze",hex:"#54504A",accent:"#6B665E"},{name:"Hale Navy",hex:"#2D3A4B",accent:"#3D4D63"},{name:"Watery",hex:"#A4D4D4",accent:"#8FC4C4"},{name:"Raindrops",hex:"#B1C4D4",accent:"#9BB0C2"},{name:"Jade Dragon",hex:"#5A7D5A",accent:"#6B9070"},{name:"Sage Green",hex:"#9CAF88",accent:"#8A9D76"},{name:"Peppercorn",hex:"#6C6C6C",accent:"#7D7D7D"},{name:"Colonel Sanders",hex:"#8B6F47",accent:"#9D7F57"},{name:"Copper Penny",hex:"#AD6F69",accent:"#BD7F79"},{name:"Coral Reef",hex:"#D9776B",accent:"#E1877B"}];function s(){let[e,s]=(0,a.useState)(0),[n,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setInterval(()=>{i(!0),setTimeout(()=>{s(e=>(e+1)%r.length),i(!1)},1e3)},8e3);return()=>clearInterval(e)},[]);let c=r[e];return(0,a.useEffect)(()=>{let e=document.documentElement;e.style.setProperty("--theme-transition","2s ease-in-out"),e.style.setProperty("--theme-primary",c.hex),e.style.setProperty("--theme-accent",c.accent)},[c]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-0 transition-opacity duration-[2000ms]",style:{background:`linear-gradient(135deg, 
            ${c.hex}08 0%, 
            ${c.hex}15 50%, 
            ${c.accent}12 100%)`,opacity:n?.6:1}}),(0,t.jsx)("div",{className:"fixed bottom-4 sm:bottom-6 left-1/2 -translate-x-1/2 pointer-events-none z-10",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 bg-white/95 backdrop-blur-sm px-2.5 sm:px-4 py-1.5 sm:py-2.5 rounded-lg sm:rounded-xl shadow-lg border border-stone-200 transition-all duration-1000",children:[(0,t.jsx)("div",{className:"relative w-10 h-8 sm:w-16 sm:h-12 rounded-md sm:rounded-lg shadow-md transition-all duration-[2000ms] transform",style:{backgroundColor:c.hex,transform:n?"scale(0.95) rotate(-2deg)":"scale(1) rotate(0deg)"},children:(0,t.jsx)("div",{className:"absolute inset-0 rounded-md sm:rounded-lg bg-gradient-to-br from-white/40 via-transparent to-transparent"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-stone-500 font-medium",children:"Sherwin-Williams"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-stone-800 transition-opacity duration-500",style:{opacity:n?.5:1},children:c.name})]})]})}),(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:`
        .themed-button {
          background-color: var(--theme-primary) !important;
          transition: background-color var(--theme-transition), transform 0.2s !important;
        }
        
        .themed-button:hover {
          background-color: var(--theme-accent) !important;
          transform: translateY(-1px);
        }

        .themed-badge {
          background-color: var(--theme-primary) !important;
          color: #1c1917 !important;
          transition: background-color var(--theme-transition) !important;
        }

        .themed-accent {
          color: var(--theme-accent) !important;
          transition: color var(--theme-transition) !important;
        }

        .themed-border {
          border-color: var(--theme-primary) !important;
          transition: border-color var(--theme-transition) !important;
        }
      `}})]})}e.s(["PaintChipAnimator",()=>s])},90833,e=>{"use strict";let t=(0,e.i(75254).default)("paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);e.s(["Paintbrush",()=>t],90833)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},95613,e=>{"use strict";var t=e.i(43476),a=e.i(25913);e.i(87467);var r=e.i(55654);let s=(0,a.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow",success:"border-transparent bg-success text-success-foreground shadow",warning:"border-transparent bg-warning text-warning-foreground shadow",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,...n}){return(0,t.jsx)("div",{className:(0,r.cn)(s({variant:a}),e),...n})}e.s(["Badge",()=>n])},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},61659,e=>{"use strict";let t=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},3849,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(87467);var r=e.i(55654),s=e.i(34763),n=e.i(95613),i=e.i(40574),c=e.i(90833),o=e.i(46897),l=e.i(84614),d=e.i(69638),m=e.i(12426),h=e.i(61659),u=e.i(75254);let x=(0,u.default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var p=e.i(78583);let f=(0,u.default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var y=e.i(25823),g=e.i(18566);function v({job:e,token:u}){(0,g.useRouter)();let[v,j]=(0,a.useState)(!1),[b,C]=(0,a.useState)(!1),[N,w]=(0,a.useState)("paid"===e.payment_state),[k,D]=(0,a.useState)(null);(0,a.useEffect)(()=>{"true"!==new URLSearchParams(window.location.search).get("success")||N||(w(!0),window.history.replaceState({},"",`/p/${u}`))},[u,N]);let A=[e.address1,e.city,e.state,e.zip].filter(Boolean).join(", "),B=e.payment_amount||e.payment_line_items?.reduce((e,t)=>e+t.price,0)||0,P=e.payment_methods||["cash","check","venmo","stripe"];async function _(e){j(!0),D(e);try{if(!(await fetch(`/api/payments/${u}/mark-paid`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_method:e})})).ok)throw Error("Failed to mark payment as paid");w(!0)}catch(e){console.error("Error marking payment as paid:",e),alert("Failed to mark payment as paid. Please try again.")}finally{j(!1),D(null)}}async function F(){C(!0);try{let e=await fetch(`/api/payments/${u}/checkout`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create payment session")}let{url:t}=await e.json();t&&(window.location.href=t)}catch(e){console.error("Error creating Stripe checkout:",e),alert(e instanceof Error?e.message:"Failed to process payment. Please try again."),C(!1)}}function E(e){switch(e){case"stripe":return(0,t.jsx)(h.CreditCard,{className:"h-5 w-5"});case"cash":return(0,t.jsx)(m.DollarSign,{className:"h-5 w-5"});case"check":return(0,t.jsx)(p.FileText,{className:"h-5 w-5"});case"venmo":return(0,t.jsx)(f,{className:"h-5 w-5"});default:return(0,t.jsx)(x,{className:"h-5 w-5"})}}return N?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 via-stone-50 to-white flex items-center justify-center p-4 relative",children:[(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-10",children:(0,t.jsx)(y.PaintChipAnimator,{})}),(0,t.jsx)(s.Card,{className:"w-full max-w-md text-center relative z-20",children:(0,t.jsxs)(s.CardContent,{className:"pt-8 pb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-success/10 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.CheckCircle,{className:"w-8 h-8 text-success"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Payment Confirmed!"}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-6",children:["Thank you for your payment of ",(0,r.formatCurrency)(B),"."]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.company?.name," has been notified."]})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-stone-100 via-stone-50 to-white relative",children:[(0,t.jsx)("header",{className:"border-b bg-card/80 backdrop-blur-sm sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center gap-3",children:[e.company?.logo_url?(0,t.jsx)("img",{src:e.company.logo_url,alt:e.company?.name||"Company Logo",className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-stone-800 flex items-center justify-center",children:(0,t.jsx)(c.Paintbrush,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold",children:e.company?.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Invoice"})]})]})}),(0,t.jsxs)("main",{className:"max-w-2xl mx-auto p-4 py-8 space-y-6",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{className:"text-xl",children:"Invoice"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.payment_approved_at&&`Approved ${(0,r.formatDate)(e.payment_approved_at)}`})]}),(0,t.jsx)(n.Badge,{variant:"secondary",children:"Due"})]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(l.User,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e.customer?.name})]}),A&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)(o.MapPin,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),(0,t.jsx)("span",{children:A})]})]})]}),(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Amount Due"}),(0,t.jsx)("p",{className:"text-5xl font-bold",children:(0,r.formatCurrency)(B)})]})})}),e.payment_line_items&&e.payment_line_items.length>0&&(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Line Items"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:e.payment_line_items.map(e=>(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:e.title}),(0,t.jsx)("span",{className:"font-medium",children:(0,r.formatCurrency)(e.price)})]},e.id))})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Project Details"})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),A&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:A})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Payment Options"})}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[P.includes("stripe")&&(0,t.jsx)(i.Button,{onClick:F,disabled:b||v,className:"w-full",size:"lg",children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.CreditCard,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.CreditCard,{className:"mr-2 h-4 w-4"}),"Pay Online with Card"]})}),P.filter(e=>"stripe"!==e).map(e=>(0,t.jsx)(i.Button,{onClick:()=>_(e),disabled:v||b,variant:"stripe"===e?"default":"outline",className:"w-full",size:"lg",children:v&&k===e?(0,t.jsxs)(t.Fragment,{children:[E(e),(0,t.jsx)("span",{className:"ml-2",children:"Confirming..."})]}):(0,t.jsxs)(t.Fragment,{children:[E(e),(0,t.jsx)("span",{className:"ml-2",children:function(e){switch(e){case"stripe":return"Pay Online with Card";case"cash":return"I Paid with Cash";case"check":return"I Paid with Check";case"venmo":return"I Paid via Venmo";default:return`I Paid via ${e}`}}(e)})]})},e)),0===P.length&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground text-center py-4",children:["No payment methods configured. Please contact ",e.company?.name||"us"," for payment instructions."]})]})]}),(e.company?.contact_phone||e.company?.contact_email)&&(0,t.jsxs)("div",{className:"mt-8 pt-6 border-t text-center text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.company?.name}),e.company?.contact_phone&&(0,t.jsx)("p",{children:e.company.contact_phone}),e.company?.contact_email&&(0,t.jsx)("p",{children:e.company.contact_email})]})]}),(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-10",children:(0,t.jsx)(y.PaintChipAnimator,{})})]})}e.s(["PublicPaymentView",()=>v],3849)}]);