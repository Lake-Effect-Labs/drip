(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34763,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(87467);var a=e.i(55654);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));s.displayName="Card";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},40574,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(25913);e.i(87467);var s=e.i(55654),i=e.i(31278);let n=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:opacity-90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef(({className:e,variant:r,size:a,loading:l,children:o,disabled:d,...c},u)=>(0,t.jsxs)("button",{className:(0,s.cn)(n({variant:r,size:a,className:e})),ref:u,disabled:d||l,...c,children:[l&&(0,t.jsx)(i.Loader2,{className:"animate-spin"}),o]}));l.displayName="Button",e.s(["Button",()=>l])},25913,e=>{"use strict";var t=e.i(7670);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=t.clsx;e.s(["cva",0,(e,t)=>s=>{var i;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:l}=t,o=Object.keys(n).map(e=>{let t=null==s?void 0:s[e],a=null==l?void 0:l[e];if(null===t)return null;let i=r(t)||r(a);return n[e][i]}),d=s&&Object.entries(s).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return a(e,o,null==t||null==(i=t.compoundVariants)?void 0:i.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...d}[t]):({...l,...d})[t]===r})?[...e,r,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},18566,(e,t,r)=>{t.exports=e.r(76562)},80720,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(87467);var a=e.i(55654);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("label",{ref:s,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...r}));s.displayName="Label",e.s(["Label",()=>s])},34098,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(87467);var a=e.i(55654);let s=r.forwardRef(({className:e,type:r,error:s,...i},n)=>(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s&&"border-destructive focus-visible:ring-destructive",e),ref:n,...i}),s&&(0,t.jsx)("p",{className:"mt-1 text-xs text-destructive",children:s})]}));s.displayName="Input",e.s(["Input",()=>s])},89056,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22016),i=e.i(26293),n=e.i(40574),l=e.i(34098),o=e.i(80720),d=e.i(34763),c=e.i(69481),u=e.i(63209),m=e.i(31278);function f({params:e}){let{token:f}=(0,r.use)(e),[h,x]=(0,r.useState)(""),[p,v]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[C,S]=(0,r.useState)(!0),[k,R]=(0,r.useState)(!0),T=(0,a.useRouter)(),{addToast:_}=(0,c.useToast)(),L=(0,i.createClient)();async function P(e){e.preventDefault(),j(!0);try{let e,t,r=null;if(k){let{data:a,error:s}=await L.auth.signUp({email:h,password:p,options:{data:{full_name:g},emailRedirectTo:`${window.location.origin}/auth/confirm?next=/join/${f}`}});if(s)return void _(s.message,"error");if(!a.user)return void _("Failed to create account","error");if(e=a.user.id,t=h,r=g,null===a.session&&a.user.identities&&0===a.user.identities.length){_("Please check your email to confirm your account. Click the link in the email to continue joining the team.","success"),j(!1);return}if(!a.session){await new Promise(e=>setTimeout(e,1e3));let{data:{session:e}}=await L.auth.getSession();if(!e){_("Please check your email to confirm your account, then use this link again to join the team.","success"),j(!1);return}}}else{let{data:a,error:s}=await L.auth.signInWithPassword({email:h,password:p});if(s)return void _(s.message,"error");if(!a.user)return void _("Failed to sign in","error");e=a.user.id,t=a.user.email||h,r=a.user.user_metadata?.full_name||null}let a=await fetch(`/api/invites/${f}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,email:t,full_name:r})});if(!a.ok){let e=await a.json();_(e.error||"Failed to join company","error");return}_("Welcome to the team!","success"),T.push("/app")}catch{_("An unexpected error occurred","error")}finally{j(!1)}}return((0,r.useEffect)(()=>{!async function(){try{let e=await fetch(`/api/invites/${f}`),t=await e.json();if(!e.ok)return void N({company_name:"",expires_at:"",valid:!1});N(t)}catch{N({company_name:"",expires_at:"",valid:!1})}finally{S(!1)}}()},[f]),C)?(0,t.jsx)(d.Card,{className:"w-full max-w-md",children:(0,t.jsx)(d.CardContent,{className:"flex items-center justify-center py-12",children:(0,t.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-muted-foreground"})})}):w?.valid?(0,t.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(d.CardHeader,{className:"text-center",children:[(0,t.jsxs)(d.CardTitle,{className:"text-2xl",children:["Join ",w.company_name]}),(0,t.jsx)(d.CardDescription,{children:k?"Create your account to join the team":"Sign in to join the team"})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[k&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"fullName",children:"Your name"}),(0,t.jsx)(l.Input,{id:"fullName",type:"text",placeholder:"John Smith",value:g,onChange:e=>y(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(l.Input,{id:"email",type:"email",placeholder:"you@email.com",value:h,onChange:e=>x(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"password",children:"Password"}),(0,t.jsx)(l.Input,{id:"password",type:"password",placeholder:"••••••••",value:p,onChange:e=>v(e.target.value),minLength:k?6:void 0,required:!0})]}),(0,t.jsx)(n.Button,{type:"submit",className:"w-full",loading:b,children:k?"Create account & join":"Sign in & join"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>R(!k),className:"text-sm text-muted-foreground hover:text-foreground underline",children:k?"Already have an account? Sign in":"Need an account? Sign up"})})]})]}):(0,t.jsx)(d.Card,{className:"w-full max-w-md",children:(0,t.jsx)(d.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:(0,t.jsx)(u.AlertCircle,{className:"w-6 h-6 text-destructive"})}),(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Invalid or expired invite"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"This invite link is no longer valid. Please ask your team for a new invite."}),(0,t.jsx)(s.default,{href:"/login",children:(0,t.jsx)(n.Button,{variant:"outline",children:"Go to login"})})]})})})}e.s(["default",()=>f])}]);