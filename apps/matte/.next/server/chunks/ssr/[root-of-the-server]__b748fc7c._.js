module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},23874,a=>{a.n(a.i(34198))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},14717,a=>{a.n(a.i(63692))},61731,a=>{a.n(a.i(68368))},916,a=>{a.n(a.i(3974))},333,a=>{"use strict";async function b(a,b){let{data:c}=await a.from("company_users").select("user_id").eq("company_id",b);if(!c||0===c.length)return[];let d=c.map(a=>a.user_id),{data:e}=await a.from("user_profiles").select("id, email, full_name").in("id",d);return e?.map(a=>({id:a.id,email:a.email,fullName:a.full_name||a.email}))||[]}async function c(a,b){let{data:c}=await a.from("jobs").select("*").eq("company_id",b).order("created_at",{ascending:!1});if(!c||0===c.length)return[];let d=[...new Set(c.filter(a=>a.customer_id).map(a=>a.customer_id))],{data:e}=d.length>0?await a.from("customers").select("*").in("id",d):{data:[]},f=new Map(e?.map(a=>[a.id,a])||[]);return c.map(a=>({...a,customer:a.customer_id&&f.get(a.customer_id)||null}))}async function d(a,b){let{data:c}=await a.from("jobs").select("*").eq("company_id",b).not("scheduled_date","is",null).order("scheduled_date",{ascending:!0});if(!c||0===c.length)return[];let d=[...new Set(c.filter(a=>a.customer_id).map(a=>a.customer_id))],{data:e}=d.length>0?await a.from("customers").select("*").in("id",d):{data:[]},f=new Map(e?.map(a=>[a.id,a])||[]);return c.map(a=>({...a,customer:a.customer_id&&f.get(a.customer_id)||null}))}async function e(a,b){let[c,d,e]=await Promise.all([a.from("jobs").select("id, status, payment_state, payment_amount").eq("company_id",b),a.from("inventory_items").select("id, name, on_hand, reorder_at, unit").eq("company_id",b),a.from("time_entries").select("duration_seconds, started_at").eq("company_id",b)]),f=c.data||[],g=d.data||[],h=e.data||[],i=f.filter(a=>["scheduled","in_progress"].includes(a.status)).length,j=f.filter(a=>"due"===a.payment_state&&a.payment_amount).reduce((a,b)=>a+(b.payment_amount||0),0),k=g.filter(a=>a.on_hand<=a.reorder_at&&a.reorder_at>0),l=new Date,m=new Date(l.getFullYear(),l.getMonth(),l.getDate()),n=new Date(m);n.setDate(n.getDate()-n.getDay());let o=h.filter(a=>new Date(a.started_at)>=m&&a.duration_seconds),p=h.filter(a=>new Date(a.started_at)>=n&&a.duration_seconds),q=o.reduce((a,b)=>a+(b.duration_seconds||0),0)/3600,r=p.reduce((a,b)=>a+(b.duration_seconds||0),0)/3600;return{activeJobs:i,outstandingPayments:j,lowInventoryCount:k.length,lowInventoryItems:k.slice(0,5),todayHours:Math.round(10*q)/10,weekHours:Math.round(10*r)/10,hasTimeTracking:h.length>0}}a.s(["getDashboardData",()=>e,"getJobsWithCustomers",()=>c,"getScheduledJobs",()=>d,"getTeamMembers",()=>b])},6875,a=>{"use strict";a.s(["ScheduleView",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ScheduleView() from the server but ScheduleView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/matte/src/components/app/schedule/schedule-view.tsx <module evaluation>","ScheduleView")},63442,a=>{"use strict";a.s(["ScheduleView",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ScheduleView() from the server but ScheduleView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/matte/src/components/app/schedule/schedule-view.tsx","ScheduleView")},75888,a=>{"use strict";a.i(6875);var b=a.i(63442);a.n(b)},31039,a=>{"use strict";var b=a.i(7997),c=a.i(14754),d=a.i(333),e=a.i(75888);async function f(){let a=await (0,c.createClient)(),f=(0,c.createAdminClient)(),{data:{user:g}}=await a.auth.getUser();if(!g)return null;let{data:h}=await f.from("company_users").select("company_id").eq("user_id",g.id).maybeSingle();if(!h)return null;let i=await (0,d.getScheduledJobs)(f,h.company_id),j=await (0,d.getTeamMembers)(f,h.company_id);return(0,b.jsx)(e.ScheduleView,{initialJobs:i,teamMembers:j,currentUserId:g.id})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b748fc7c._.js.map